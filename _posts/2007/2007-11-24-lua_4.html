---
layout: post
title: 'Luaの勉強: 4'
date: 2007-11-24 15:47:52.000000000 +09:00
type: post
published: true
status: publish
categories:
- Lua
tags: []
meta: {}
author:
  login: skoji
  email: skoji@mac.com
  display_name: skoji
  first_name: ''
  last_name: ''
---
<p>Luaリファレンスマニュアルの<a href="http://sugarpot.sakura.ne.jp/yuno/html/lua51_manual_ja.html">日本語訳</a>でお勉強第4回です。</p>
<h4>環境</h4>
<p>グローバル変数を解決する「環境」。これもやっぱりテーブル。実はそれほどグローバルじゃなくて、関数の環境や実行中スレッドの環境はsetfenv関数で置き換えられるのでした。ユーザデータ、C関数、他のスレッドの環境は、C APIを使わないと変更できません。</p>
<p>って、ユーザデータの環境って使うことあるのかな...?</p>
<h4>弱参照テーブル</h4>
<p>弱参照テーブルから参照されているオブジェクト(キーまたは値)は、ガベージコレクト対象になります。</p>
<p>テーブルのメタテーブルで__modeに"k"が含まれているとキーが弱参照, "v"が含まれていれば値が弱参照、だそうです。</p>
<p>何に使うんだろう、弱参照...。</p>
<p>次はコルーチン。なので別記事をおこします。ところで「べつき」を変換すると「戸次」になるんですね。これはなんだ、地名か、人名か? </p>
